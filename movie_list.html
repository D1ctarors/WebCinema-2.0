{% extends 'movies/template.html' %}
{% load static %}

{% block title %} Главная {% endblock %}

{% block content %}
<!-- Топ 10 за месяц -->
<section class="top-films main-section">
	<div class="container-fluid">
		<div class="row">
			<div class="col-12">
				<h4 class="">Топ 10 за месяц</h4>
			</div>
		</div>
	</div>

	<!-- Слайдер топ 10 за неделю -->
	<div class="container">
		<div class="swiper top-films-slider">
			<div class="top-films-slider__wrapper swiper-wrapper">

				{% for movie in top_movies %}

				<a href="/movie/{{ movie.pk }}/" class="top-films-slider__slide swiper-slide slide d-block">
					<div class="slide__content ">
						<div class="slide__header ">
							<div class="slide__title">{{ movie.title }}</div>
							<div class="raitings">
								{% if movie.raitings_kp == None %}
								<div class="raitings__kp" style="display: none"></div>
								{% else %}
								<div class="raitings__kp">kp: {{ movie.raitings_kp }}</div>
								{% endif %}
								{% if movie.raitings_imdb == None %}
								<div class="raitings__imdb" style="display: none"></div>
								{% else %}
								<div class="raitings__imdb">imdb: {{ movie.raitings_imdb }}</div>
								{% endif %}
							</div>
						</div>
						<div class="slide__small">
							<small class="slide__date">{{ movie.year }} год,</small>
							<small class="slide__duration">{{ movie.time }} мин,</small>
							{% if movie.age_restriction %}
							<small class="slide__age">+{{ movie.age_restriction }}</small>
							{% endif %}
						</div>
						<div class="slide__main">
							<div class="slide__description">
								<div class="truncate">
									<p>{{ movie.description }}</p>
								</div>
							</div>

							<div class="slide__link">
								<img src="/static/vendor/img/play-btn.svg" alt="">
							</div>

						</div>

					</div>
					{% if movie.poster_big == None %}
					<img src="{% static '/vendor/img/default-film-big.png' %}" alt="">
					{% else %}
					<img src="{{ movie.poster_big }}" alt="">
					{% endif %}

				</a>

				{% endfor %}

			</div>
			<div class="top-films-slider__swiper-button-next swiper-button-next"></div>
			<div class="top-films-slider__swiper-button-prev swiper-button-prev"></div>
		</div>
	</div>
	<!-- /Слайдер топ 10 за неделю -->
</section>

<!-- Новинки -->
<!-- <section class="main-section">
	<div class="container-fluid">
		<div class="row">
			<div class="col-12 d-flex justify-content-between">
				<h4>Новинки</h4>
				<a href="" class="d-flex" style="width: 10%; justify-content: end;"><i
						class="fa-solid fa-arrow-right fa-fade" style="color: #ffffff; font-size: 20px;"></i></a>
			</div>
		</div>
		<div class="popular-films__row-main">
			<div class="swiper movies-slider" style="overflow: visible;">
				<div class="swiper-wrapper movies-slider__wrapper ">
					{% for movie in now_in_cinema %}
					<div class="col-2 mb-auto d-block swiper-slide" style="box-sizing: border-box;">
						<a href="/movie/{{ movie.pk }}/" class="popular-films__item popular-film-slide">

							{% if movie.poster_big == None %}
							<img src="{% static '/vendor/img/default-film-big.png' %}" alt="" class="w-100 img-fluid">
							{% else %}
							<img src="{{ movie.poster_big }}" alt="{{ movie.poster_big }}" class="w-100 img-fluid">
							{% endif %}

							<div class="popular-films__raitings raitings">
								{% if movie.raitings_kp == None %}
								<div class="raitings__kp" style="display: none"></div>
								{% else %}
								<div class="raitings__kp">kp: {{ movie.raitings_kp }}</div>
								{% endif %}

								{% if movie.raitings_imdb == None %}
								<div class="raitings__imdb" style="display: none"></div>
								{% else %}
								<div class="raitings__imdb">imdb: {{ movie.raitings_imdb }}</div>
								{% endif %}
							</div>
							<div class="popular-films__body">
								<div class="popular-films__title-film">{{ movie.title }}</div>
								<div class="popular-films__years-film">{{ movie.year }} г.</div>
								<div class="popular-films__country-film">
									{% for country in movie.countries.all %}
									{{ country.name }}
									{% endfor %}
								</div>
							</div>
						</a>
					</div>
					{% endfor %}
				</div>
			</div>


		</div>

	</div>
</section> -->

<!-- Сейчас в кино -->
<section class="main-section">
	<div class="container-fluid">
		<div class="row">
			<div class="col-12 d-flex justify-content-between">
				<h4>Сейчас в кино</h4>
				<a href="" class="d-flex" style="width: 10%; justify-content: end;"><i
						class="fa-solid fa-arrow-right fa-fade" style="color: #ffffff; font-size: 20px;"></i></a>
			</div>
		</div>
		<div class="popular-films__row-main">
			<div class="swiper movies-slider" style="overflow: visible;">
				<div class="swiper-wrapper movies-slider__wrapper ">
					{% for movie in now_in_cinema %}
					<div class="col-2 mb-auto d-block swiper-slide" style="box-sizing: border-box;">
						<a href="/movie/{{ movie.pk }}/" class="popular-films__item popular-film-slide">

							{% if movie.poster_big == None %}
							<img src="{% static '/vendor/img/default-film-big.png' %}" alt="" class="w-100 img-fluid">
							{% else %}
							<img src="{{ movie.poster_big }}" alt="{{ movie.poster_big }}" class="w-100 img-fluid">
							{% endif %}

							<div class="popular-films__raitings raitings">
								{% if movie.raitings_kp == None %}
								<div class="raitings__kp" style="display: none"></div>
								{% else %}
								<div class="raitings__kp">kp: {{ movie.raitings_kp }}</div>
								{% endif %}

								{% if movie.raitings_imdb == None %}
								<div class="raitings__imdb" style="display: none"></div>
								{% else %}
								<div class="raitings__imdb">imdb: {{ movie.raitings_imdb }}</div>
								{% endif %}
							</div>
							<div class="popular-films__body">
								<div class="popular-films__title-film">{{ movie.title }}</div>
								<div class="popular-films__years-film">{{ movie.year }} г.</div>
								<div class="popular-films__country-film">
									{% for country in movie.countries.all %}
									{{ country.name }}
									{% endfor %}
								</div>
							</div>
						</a>
					</div>
					{% endfor %}
				</div>
			</div>


		</div>

	</div>
</section>

<!-- Популярные -->
<section class="popular-films main-section">
	<div class="container-fluid">
		<div class="row">
			<div class="col-12">
				<h4 class="">Популярные сейчас</h4>
			</div>
		</div>
		<div class="row g-xl-4 g-lg-4 g-md-4 g-sm-4 g-2 popular-films__row-main">


			{% for movie in popular_movies %}
			<div class="col-xl-2 col-lg-4 col-md-4 col-sm-6 col-6 mb-auto d-block">
				<a href="/movie/{{ movie.pk }}/" class="popular-films__item">

					{% if movie.poster_big == None %}
					<img src="{% static '/vendor/img/default-film-big.png' %}" alt="" class="w-100 img-fluid">
					{% else %}
					<img src="{{ movie.poster_big }}" alt="{{ movie.poster_big }}" class="w-100 img-fluid">
					{% endif %}

					<div class="popular-films__raitings raitings">
						{% if movie.raitings_kp == None %}
						<div class="raitings__kp" style="display: none"></div>
						{% else %}
						<div class="raitings__kp">kp: {{ movie.raitings_kp }}</div>
						{% endif %}

						{% if movie.raitings_imdb == None %}
						<div class="raitings__imdb" style="display: none"></div>
						{% else %}
						<div class="raitings__imdb">imdb: {{ movie.raitings_imdb }}</div>
						{% endif %}
					</div>
					<div class="popular-films__body">
						<div class="popular-films__title-film">{{ movie.title }}</div>
						<div class="popular-films__years-film">{{ movie.year }} г.</div>
						<div class="popular-films__country-film">
							{% for country in movie.countries.all %}
							{{ country.name }}
							{% endfor %}
						</div>
					</div>
				</a>
			</div>
			{% endfor %}
		</div>


		<div class="row ">
			<div class="col-12 d-flex justify-content-center mt-4">
				<a href="{% url 'movies:json_filter' %}" class="btn-main">Ещё</a>
			</div>
		</div>


	</div>
</section>

<!-- Жанры -->
<section class="genres main-section">
	<div class="container-fluid">
		<div class="row">
			<div class="col-12">
				<h4 class="">Жанры</h4>
			</div>
		</div>


		<div class="genre">
			<div class="swiper genres-slider">
				<div class="swiper-wrapper genres-slider__wrapper ">
					{% for genre in view.get_genres %}
					<div class="swiper-slide d-block">
						<a href="{% url 'movies:json_filter' %}?genre={{ genre.id }}">{{ genre.name }}</a>
					</div>
					{% endfor %}
				</div>
			</div>
		</div>
	</div>
</section>

<!-- Русские новинки -->
<section class="main-section">
	<div class="container-fluid">
		<div class="row">
			<div class="col-12 d-flex justify-content-between">
				<h4>Русские новинки</h4>
				<a href="{% url 'movies:json_filter' %}?category={{ 1 }}&year={{ 2023 }}" class="d-flex"
					style="width: 10%; justify-content: end;"><i class="fa-solid fa-arrow-right fa-fade"
						style="color: #ffffff; font-size: 20px;"></i></a>
			</div>
		</div>
		<div class="popular-films__row-main">
			<div class="swiper movies-slider" style="overflow: visible;">
				<div class="swiper-wrapper movies-slider__wrapper ">
					{% for movie in russian_new %}
					<div class="col-2 mb-auto d-block swiper-slide" style="box-sizing: border-box;">
						<a href="/movie/{{ movie.pk }}/" class="popular-films__item popular-film-slide">

							{% if movie.poster_big == None %}
							<img src="{% static '/vendor/img/default-film-big.png' %}" alt="" class="w-100 img-fluid">
							{% else %}
							<img src="{{ movie.poster_big }}" alt="{{ movie.poster_big }}" class="w-100 img-fluid">
							{% endif %}

							<div class="popular-films__raitings raitings">
								{% if movie.raitings_kp == None %}
								<div class="raitings__kp" style="display: none"></div>
								{% else %}
								<div class="raitings__kp">kp: {{ movie.raitings_kp }}</div>
								{% endif %}

								{% if movie.raitings_imdb == None %}
								<div class="raitings__imdb" style="display: none"></div>
								{% else %}
								<div class="raitings__imdb">imdb: {{ movie.raitings_imdb }}</div>
								{% endif %}
							</div>
							<div class="popular-films__body">
								<div class="popular-films__title-film">{{ movie.title }}</div>
								<div class="popular-films__years-film">{{ movie.year }} г.</div>
								<div class="popular-films__country-film">
									{% for country in movie.countries.all %}
									{{ country.name }}
									{% endfor %}
								</div>
							</div>
						</a>
					</div>
					{% endfor %}
				</div>
			</div>


		</div>

	</div>
</section>


{% endblock %}
